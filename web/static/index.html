<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>strugalem.ru — Сокращение ссылок</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}

        body{
            font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
            color:#e2e8f0;min-height:100vh;
            display:flex;flex-direction:column;align-items:center;justify-content:center;
            background:#0b0f1a;
            overflow-x:hidden;
            position:relative;
            padding:40px 0;
        }

        /* Градиентное свечение на фоне */
        body::before{
            content:'';position:fixed;top:-40%;left:-20%;
            width:80vw;height:80vw;
            background:radial-gradient(circle,rgba(99,102,241,.15) 0%,transparent 70%);
            pointer-events:none;z-index:0;
        }
        body::after{
            content:'';position:fixed;bottom:-30%;right:-15%;
            width:60vw;height:60vw;
            background:radial-gradient(circle,rgba(139,92,246,.1) 0%,transparent 70%);
            pointer-events:none;z-index:0;
        }

        .container{
            max-width:620px;width:100%;padding:0 24px;text-align:center;
            position:relative;z-index:1;
        }

        /* Иконка-логотип */
        .logo{
            width:72px;height:72px;margin:0 auto 24px;
            background:linear-gradient(135deg,#6366f1,#8b5cf6);
            border-radius:20px;
            display:flex;align-items:center;justify-content:center;
            box-shadow:0 8px 32px rgba(99,102,241,.3);
        }
        .logo svg{width:36px;height:36px;fill:none;stroke:#fff;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}

        h1{
            font-size:2.8rem;font-weight:800;margin-bottom:8px;
            background:linear-gradient(135deg,#f8fafc,#94a3b8);
            -webkit-background-clip:text;-webkit-text-fill-color:transparent;
            background-clip:text;
        }
        .subtitle{font-size:1.15rem;color:#64748b;margin-bottom:48px;line-height:1.5}

        /* Карточка с формой */
        .card{
            background:rgba(30,41,59,.6);
            backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
            border:1px solid rgba(51,65,85,.5);
            border-radius:20px;
            padding:32px;
            box-shadow:0 4px 24px rgba(0,0,0,.2);
        }

        .form-group{display:flex;gap:10px}
        input[type="url"]{
            flex:1;padding:16px 18px;
            border:1px solid #334155;border-radius:12px;
            background:rgba(15,23,42,.8);color:#f8fafc;font-size:1rem;
            outline:none;transition:all .25s;
        }
        input[type="url"]:focus{
            border-color:#6366f1;
            box-shadow:0 0 0 3px rgba(99,102,241,.2);
        }
        input[type="url"]::placeholder{color:#475569}

        button{
            padding:16px 28px;border:none;border-radius:12px;font-size:1rem;
            font-weight:600;cursor:pointer;transition:all .25s;
        }
        .btn-primary{
            background:linear-gradient(135deg,#6366f1,#8b5cf6);color:#fff;
            box-shadow:0 4px 16px rgba(99,102,241,.3);
        }
        .btn-primary:hover{
            transform:translateY(-1px);
            box-shadow:0 6px 24px rgba(99,102,241,.4);
        }
        .btn-primary:active{transform:translateY(0)}
        .btn-primary:disabled{
            background:#1e293b;color:#475569;
            box-shadow:none;cursor:not-allowed;transform:none;
        }

        /* Результат */
        .result{
            margin-top:20px;padding:20px;
            background:rgba(15,23,42,.6);
            border:1px solid rgba(99,102,241,.2);
            border-radius:14px;
            display:none;text-align:left;
            animation:slideIn .3s ease;
        }
        .result.visible{display:block}
        @keyframes slideIn{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}

        .result-label{font-size:.8rem;color:#64748b;margin-bottom:10px;text-transform:uppercase;letter-spacing:.5px}
        .result-row{display:flex;align-items:center;gap:10px}
        .result-link{
            flex:1;min-width:0;font-size:1.05rem;color:#818cf8;
            word-break:break-all;
            text-decoration:none;font-weight:500;
        }
        .result-link:hover{color:#a5b4fc}

        .btn-copy{
            background:rgba(99,102,241,.15);color:#818cf8;
            padding:10px 18px;font-size:.9rem;border-radius:10px;
            border:1px solid rgba(99,102,241,.2);
            flex-shrink:0;white-space:nowrap;
        }
        .btn-copy:hover{background:rgba(99,102,241,.25)}

        .error{color:#f87171;font-size:.9rem;margin-top:16px;display:none}
        .error.visible{display:block}

        /* Фичи */
        .features{
            display:grid;grid-template-columns:repeat(3,1fr);gap:16px;
            margin-top:40px;
        }
        .feature{
            padding:20px 16px;
            background:rgba(30,41,59,.4);
            border:1px solid rgba(51,65,85,.3);
            border-radius:14px;
            transition:border-color .25s;
        }
        .feature:hover{border-color:rgba(99,102,241,.3)}
        .feature-icon{font-size:1.5rem;margin-bottom:8px}
        .feature-title{font-size:.9rem;font-weight:600;color:#e2e8f0;margin-bottom:4px}
        .feature-desc{font-size:.8rem;color:#64748b;line-height:1.4}

        footer{
            margin-top:48px;color:#334155;font-size:.85rem;
            display:flex;align-items:center;gap:16px;justify-content:center;
        }
        footer a{color:#475569;text-decoration:none;transition:color .2s}
        footer a:hover{color:#818cf8}
        .dot{color:#1e293b}

        @media(max-width:600px){
            h1{font-size:2rem}
            .form-group{flex-direction:column}
            .form-group button{width:100%}
            .features{grid-template-columns:1fr}
            .result-row{flex-direction:column;align-items:stretch}
            .btn-copy{width:100%;text-align:center}
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
            <svg viewBox="0 0 24 24"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg>
        </div>

        <h1>strugalem.ru</h1>
        <p class="subtitle">Сокращайте длинные ссылки в один клик</p>

        <div class="card">
            <form id="shorten-form">
                <div class="form-group">
                    <input type="url" id="url-input" placeholder="Вставьте длинную ссылку..." required>
                    <button type="submit" class="btn-primary" id="submit-btn">Сократить</button>
                </div>
            </form>

            <div class="error" id="error-msg"></div>

            <div class="result" id="result">
                <div class="result-label">Короткая ссылка</div>
                <div class="result-row">
                    <a class="result-link" id="short-link" href="#" target="_blank"></a>
                    <button type="button" class="btn-copy" id="copy-btn">Копировать</button>
                </div>
            </div>
        </div>

        <div class="features">
            <div class="feature">
                <div class="feature-icon">&#9889;</div>
                <div class="feature-title">Быстро</div>
                <div class="feature-desc">Ссылка создаётся мгновенно</div>
            </div>
            <div class="feature">
                <div class="feature-icon">&#128274;</div>
                <div class="feature-title">Надёжно</div>
                <div class="feature-desc">Ссылки работают всегда</div>
            </div>
            <div class="feature">
                <div class="feature-icon">&#128640;</div>
                <div class="feature-title">Просто</div>
                <div class="feature-desc">Без регистрации и SMS</div>
            </div>
        </div>

        <footer>
            <a href="/swagger/index.html">API</a>
            <span class="dot">&middot;</span>
            <span>strugalem.ru</span>
        </footer>
    </div>

    <script>
        const form = document.getElementById('shorten-form');
        const input = document.getElementById('url-input');
        const submitBtn = document.getElementById('submit-btn');
        const resultDiv = document.getElementById('result');
        const shortLink = document.getElementById('short-link');
        const copyBtn = document.getElementById('copy-btn');
        const errorMsg = document.getElementById('error-msg');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            errorMsg.classList.remove('visible');
            resultDiv.classList.remove('visible');
            submitBtn.disabled = true;
            submitBtn.textContent = '...';

            try {
                const resp = await fetch('/api/v1/shorten', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({long_url: input.value})
                });
                const data = await resp.json();

                if (!resp.ok) {
                    throw new Error(data.error || 'Ошибка сервера');
                }

                shortLink.href = data.short_url;
                shortLink.textContent = data.short_url;
                resultDiv.classList.add('visible');
                input.value = '';
            } catch (err) {
                errorMsg.textContent = err.message;
                errorMsg.classList.add('visible');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Сократить';
            }
        });

        copyBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(shortLink.href).then(() => {
                copyBtn.textContent = 'Скопировано!';
                setTimeout(() => { copyBtn.textContent = 'Копировать'; }, 1500);
            });
        });
    </script>
</body>
</html>
